<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>La boucle while</title>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="variablesaffectation.html">Variables et affectation</a></li>
                <li><a href="conditions.html">Conditions</a></li>
                <li><a>Boucles <i class="fas fa-caret-down"></i></a>
                    <div class="dropdown">
                        <ul>
                            <li><a href="bouclefor.html">La boucle for</a></li>
                            <li><a href="bouclewhile.html">La boucle while</a></li>
                            <li><a href="bouclesimbriquees.html">Les boucles imbriquées</a></li>
                        </ul>
                    </div>
                </li>
                <li><a>Chaines de caractères <i class="fas fa-caret-down"></i></a>
                    <div class="dropdown">
                        <ul>
                            <li><a href="recherchesuppression.html">Recherche et suppression</a></li>
                            <li><a href="nombredevoyelles.html">Nombre de voyelles</a></li>
                        </ul>
                    </div>
                </li>
                <li><a>Tableaux <i class="fas fa-caret-down"></i></a>
                    <div class="dropdown">
                        <ul>
                            <li><a href="tri.html">Tri</a></li>
                            <li><a href="">Recherche</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="fonctions.html">Fonctions</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div>
            <h1>Devine le nombre !</h1>
        </div>
        <section>
            <h2>Enonce</h2>
            <p>L’utilisateur doit deviner un nombre entre 1 et 50 que le programme a choisi aléatoirement en 10 tentatives. Quand l’utilisateur entre une valeur, on lui affiche le nombre de tentatives restantes, ainsi qu’un message indiquant si sa réponse est correcte ou pas.</p>
        </section>
        <section class="boucle">
            <h2>Demo</h2>
            <p>Entrer un nombre entre : 1-50</p>
            <p>Tentatives restantes : <span id="tentatives">10</span></p>
            <div class="affect">
                <input type="number" id="while" placeholder="Number between 1-50">
                <button type="button" onclick=onSubmit() class="btn">Envoyer</button>
            </div>
            <div class="output">
                <output id="message"></output>
            </div>
        </section>
        <section class="source">
            <h2>Code source</h2>
            <img src="images/bouclewhile.png" alt="source code">
        </section>
        <script>
            var essaisnumber;
            var winMessage;
            var lostMessage = "Réesseyez encore !";
            var tentatives = document.getElementById("tentatives");
            var message = document.getElementById("message")
            let réponse = Math.floor(Math.random() * 50+1);
            let essais =10;

            function writeattempts () {
                tentatives.innerHTML = essais;
            }
            function onSubmit () {
                --essais;
                essaisnumber = 9 - essais;
                if(essais > 0) {
                    let userInput = document.getElementById("while").value;
                    if(isNaN(userInput) || userInput== undefined) {
                        alert("Veuillez entrer un numéro !")
                    }
                        else {
                            isCorrect(userInput)
                        }
                    userInput.value = ""
                }
                else {
                    message.innerHTML = lostMessage
                    tentatives.innerHTML = 0;
                }
            }
            function isCorrect(userInput) {
                let moins = "Mon numéro est moins que" + " " + userInput + " , Réesseyez encore !"
                let supérieur = "Mon numéro est supérieur à" + " " + userInput + " , Réesseyez encore !"
                    if (userInput == réponse) {
                        if(essais >= 8){
                            winMessage = 'Félicitations, vous avez gagné'
                        } else {
                            winMessage = "Félicitations, vous avez gagné après " + essaisnumber+ " " + "essais" ;
                        }
                    message.innerHTML = winMessage
                    } 
                    else if (userInput > réponse) {
                        message.innerHTML = moins
                        writeattempts()
                    }
                    else if (userInput < réponse) {
                        message.innerHTML = supérieur
                        writeattempts()
                    }
            }
        </script>
    </main>
    <footer>
        <button><a href="bouclefor.html">BACK</a></button>
        <h3>La boucle while</h3>
        <button><a href="bouclesimbriquees.html">NEXT</a></button>
    </footer>
</body>
</html>